# 工学院大学マジシャンズ・ソサエティ公式サイト

## 1. サービスを一言で表す説明
工学院大学マジシャンズ・ソサエティ（KMS）の公式ポートフォリオサイトです。
新歓情報の提供、活動実績の紹介、そして外部からの公演依頼を円滑に受け付けるための公式窓口として機能します。

## 2. サイト概要とURL
| 項目 | 内容 |
| --- | --- |
| **制作者** | 工学院大学情報学部所属のマジシャンTN（公式サイトのリニューアルを担当） |
| **技術スタック** | HTML5, CSS3, Vanilla JavaScript, Google Apps Script (GAS) |
| **ページ構成** | `index.html`（ホーム） / `about.html`（活動紹介） / `contact.html`（お問い合わせ） / `header.html`（共通ヘッダー） |
| **SEO対策** | `sitemap.xml`, `robots.txt`, OGP設定済み |
| **ステータス** | 運用中（GitHub Pages等でのホスティングを想定） |

## 3. 制作背景と目的
- **リニューアルの動機**: 既存サイトのデザイン刷新と、スマートフォン利用を前提としたUI/UXの最適化。
- **課題解決**: 
    - 「公演依頼」と「その他のお問い合わせ」を明確に区分し、依頼時に必要な情報（日時、予算、会場等）をフォーム上で完結させることで、メール往復のコストを削減。
    - 入部希望者が活動内容を直感的に理解できるギャラリーやFAQの整備。
- **技術的挑戦**: フレームワークに頼らず、標準技術（Vanilla JS, CSS Grid/Flexbox）のみでリッチなインタラクションとSPA風の遷移を実現すること。

## 4. デザイン・UIのこだわり
- **没入感を高める演出**:
    - **初回限定オープニング**: セッションストレージ (`sessionStorage`) を利用し、初回訪問時のみブランドムービーを再生。
    - **季節連動アニメーション**: 12月〜2月の冬季限定で、タイトルロゴに雪が降り積もる演出（Canvas API）を実装。
- **テーマ切替（ダーク/ライトモード）**:
    - 画面右上の電球スイッチを引くことで、ステージの暗転（ダーク）と日常（ライト）を切り替え可能。
    - **物理演算**: バネの物理モデルを用いた紐の揺れをJavaScriptで再現。
    - **五感へのフィードバック**: Web Audio APIによるスイッチ音と、Vibration APIによる触覚フィードバック（対応端末のみ）を実装。
- **迷わせない導線設計**:
    - `fetch` APIによる共通ヘッダーの動的読み込みと、現在地 (`aria-current`) の自動ハイライト。
    - フォーム入力モードの動的切り替えにより、ユーザーの目的に応じて不要な入力項目を非表示化。

## 5. 実装した主な機能
| 機能 | ファイル/技術 | 詳細 |
| --- | --- | --- |
| **テーマ切替システム** | `lightbulb.js` / `lightbulb.css` | 物理演算（Spring Physics）を用いた紐の挙動、配色変数の即時置換、効果音・バイブレーション制御。 |
| **共通ヘッダー** | `script.js` / `header.html` | 非同期読み込みにより保守性を向上。ロゴやアイコンもテーマに合わせて自動反転。 |
| **お問い合わせフォーム** | `script.js` / Google Apps Script | 「公演依頼」「その他」のラジオボタンで必須項目（予算、会場など）を動的に制御。GASエンドポイントへJSONをPOST送信。 |
| **スクロール演出** | `script.js` / `scroll.css` | `IntersectionObserver` を利用した軽量なフェードインアニメーション。`data-animate` 属性で制御。 |
| **雪のアニメーション** | `snow-title.js` | HTML要素（タイトル文字）のピクセルデータを解析し、雪が文字の上に物理的に積もる様子をシミュレーション。 |
| **SEO・OGP** | 各HTML / `robots.txt` | メタタグ完備、クローラー制御、サイトマップ設置による検索エンジン最適化。 |

## 6. フォルダ構成
```
kogakuin_magic/
├─ index.html                 # ホーム（FV動画、ヒーローセクション）
├─ about.html                 # 活動紹介（ギャラリー）
├─ contact.html               # お問い合わせ（多機能フォーム）
├─ header.html                # 共通ヘッダーコンポーネント
├─ sitemap.xml                # サイトマップ
├─ robots.txt                 # クローラー設定
├─ assets/
│  ├─ css/
│  │  ├─ style.css            # メインスタイル（変数、共通設定）
│  │  ├─ scroll.css           # スクロールアニメーション
│  │  └─ lightbulb.css        # 電球スイッチスタイル
│  ├─ js/
│  │  ├─ script.js            # ルーティング、フォーム制御、共通ロジック
│  │  ├─ lightbulb.js         # テーマ切替（物理演算・音声・振動）
│  │  └─ snow-title.js        # 冬季限定雪アニメーション
│  ├─ images/                 # 画像アセット（WebP推奨）
│  └─ audio/                  # 効果音（Pendant_Light.mp3等）
└─ LICENSE
```

## 7. 工夫した点・学んだこと
- **アクセシビリティ (a11y)**:
    - フォームのエラーメッセージに `aria-live="polite"` を付与し、スクリーンリーダー利用者にリアルタイムで通知。
    - カラーコントラストや `aria-label` の適切な設定。
- **パフォーマンス**:
    - 画像の遅延読み込み (`loading="lazy"`) と、First Viewの優先読み込み (`fetchpriority="high"`).
    - 重いライブラリ（jQuery等）を排除し、Core Web Vitalsを意識した軽量設計。
- **保守性**:
    - CSS変数 (`--color-bg`, `--color-primary` 等) によるテーマ管理の一元化。
    - JSの機能をモジュール単位（機能ごと）にファイル分割し、可読性を維持。

## 8. 今後の展望
1.  **活動実績のCMS化**: Google Spreadsheet等を簡易CMSとして利用し、HTMLを編集せずに実績を追加できる仕組みの構築。
2.  **画像の次世代フォーマット対応**: 全画像をWebP/AVIFへ完全移行し、さらなる高速化を図る。
3.  **多言語対応 (i18n)**: 留学生や海外からの訪問者に向けた英語ページの拡充。
4.  **CI/CDパイプライン**: GitHub Actionsによるデプロイ自動化とLighthouse計測の定期実行。

